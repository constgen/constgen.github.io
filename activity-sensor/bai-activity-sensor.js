(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.ActivitySensor=b():a.ActivitySensor=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='./',b(b.s=1)}([function(a,b,c){'use strict';function d(){}function e(){f.call(this)}var f=c(5),g=f.prototype,h=Object.create(g);e.prototype=h,h.constructor=e,h.init=d,h.uninit=d,h.subscribe=function(a){g.subscribe.call(this,a),1===this.callbacks.length&&this.init()},h.unsubscribe=function(a){g.unsubscribe.call(this,a),this.callbacks.length||this.uninit()},a.exports=e},function(a,b,c){a.exports=c(2)},function(a,b,c){'use strict';function d(){this.orientationSensor=new f,this.movementSensor=new e,this.orientation=this.orientationSensor.orientation,this.movement=this.movementSensor.movement}var e=c(3),f=c(6),g=c(8),h=e.MOVEMENT_TYPE,i=f.ORIENTATION_TYPE;d.ACTIVITY_TYPE=g,d.prototype={constructor:d,get activityType(){var a=this.movement,b=this.orientation;switch(!0){case b===i.LAYING_SCREEN_DOWN&&a===h.STANDING:case b===i.LAYING_SCREEN_UP&&a===h.STANDING:case b===i.STANDING_PORTRAIT&&a===h.STANDING:case b===i.STANDING_LANDSCAPE&&a===h.STANDING:return g.IDLE;case b===i.LIFTED:return g.LAYING;case b===i.STANDING_PORTRAIT&&a===h.DRIVING:case b===i.STANDING_LANDSCAPE&&a===h.DRIVING:return g.IN_VEHICLE;case b===i.WATCHED_PORTRAIT&&a===h.MOVING:case b===i.WATCHED_LANDSCAPE&&a===h.MOVING:case b===i.RISED_PORTRAIT&&a===h.MOVING:case b===i.RISED_LANDSCAPE&&a===h.MOVING:return g.FIDGETING;case a===h.STANDING:return g.STATIONARY;case a===h.MOVING:return g.FIDGETING;case a===h.WALKING:return g.WALKING;case a===h.RUNNING:return g.RUNNING;case a===h.DRIVING:return g.IN_VEHICLE;default:return g.UNKNOWN;}},subscribe:function(a){function b(b){'movement'in b&&(c.movement=b.movement),'orientation'in b&&(c.orientation=b.orientation),a({type:c.activityType})}var c=this;this.orientationSensor.subscribe(b),this.movementSensor.subscribe(b)},unsubscribe:function(a){a||(this.orientationSensor.unsubscribe(),this.movementSensor.unsubscribe())}},a.exports=d},function(a,b,c){'use strict';function d(a,b,c){var d,e,f=0;if(a.length>b){for(d=0;d<b;d++)e=a[a.length-d-1],e*=1-d/b,0>e&&c&&(e*=-1),(0.1<e||-0.1>e)&&(f+=e);return 100*f/b}return 0}function e(){var a=this;g.call(this),this.motionHistory={x:[],y:[],z:[]},this.movement=f.UNDEFINED,this.sensorHandler=function(b){var c,d;a.motionHistory.x.push(b.acceleration.x),a.motionHistory.y.push(b.acceleration.y),a.motionHistory.z.push(b.acceleration.z),c=a.mostRecentMovementOverall(75),d=a.mostRecentMovementOverall(4e3),a.movement=40<d?f.DRIVING:30<c?f.WALKING:10<c?f.MOVING:f.STANDING}}var f=c(4),g=c(0);e.MOVEMENT_TYPE=f,e.prototype=Object.create(g.prototype),e.prototype.constructor=e,e.prototype.mostRecentMovementOverall=function(a){return(d(this.motionHistory.x,a,!0)+d(this.motionHistory.y,a,!0)+d(this.motionHistory.z,a,!0))/3},e.prototype.init=function(){window.addEventListener('devicemotion',this.sensorHandler,!1)},e.prototype.uninit=function(){window.removeEventListener('devicemotion',this.sensorHandler,!1)},Object.defineProperties(e.prototype,{movement:{configurable:!1,enumerable:!0,get:function(){return this._movement},set:function(a){this._movement!==a&&(this._movement=a,this.emit({movement:a}))}}}),a.exports=e},function(a){'use strict';a.exports={STANDING:'Standing',MOVING:'Moving',WALKING:'Walking',RUNNING:'Running',RIDING:'Riding',DRIVING:'Driving',UNDEFINED:'Undefined'}},function(a){'use strict';function b(){this.callbacks=[]}b.prototype={constructor:b,subscribe:function(a){a&&this.callbacks.push(a)},unsubscribe:function(a){var b,c=this.callbacks;a?(b=c.indexOf(a),0<=b&&c.slice(b,1)):c.length=0},emit:function(a){for(var b=-1,c=this.callbacks;++b in c;)c[b](a)}},a.exports=b},function(a,b,c){'use strict';function d(){var a=this;f.call(this),this.orientation=e.UNDEFINED,this.sensorHandler=function(b){var c=b.beta,d=b.gamma;a.orientation=(175<c||-175>c||-5<c&&5>c)&&(-85>d||85<d)?e.STANDING_LANDSCAPE:70<=c&&95>c&&-5<d&&5>d?e.STANDING_PORTRAIT:-1<c&&1>c&&-1<d&&1>d?e.LAYING_SCREEN_UP:(-179>c||179<c)&&-1<d&&1>d?e.LAYING_SCREEN_DOWN:(35<d||-35>d)&&-90<c&&90>c?e.WATCHED_LANDSCAPE:(160<c||-160>c)&&-10<d&&10>d?e.LIFTED:30<=c&&70>c?e.WATCHED_PORTRAIT:95<=c&&120>c?e.RISED_PORTRAIT:e.UNDEFINED}}var e=c(7),f=c(0);d.ORIENTATION_TYPE=e,d.prototype=Object.create(f.prototype),d.prototype.construtcor=d,d.prototype.init=function(){window.addEventListener('deviceorientation',this.sensorHandler,!1)},d.prototype.uninit=function(){window.removeEventListener('deviceorientation',this.sensorHandler,!1)},Object.defineProperties(d.prototype,{orientation:{configurable:!1,enumerable:!0,get:function(){return this._orientation},set:function(a){this._orientation!==a&&(this._orientation=a,this.emit({orientation:a}))}}}),a.exports=d},function(a){'use strict';a.exports={LAYING_SCREEN_DOWN:'LayingScreenDown',LAYING_SCREEN_UP:'LayingScreenUp',STANDING_PORTRAIT:'StandingPortrait',STANDING_LANDSCAPE:'StandingLandscape',WATCHED_PORTRAIT:'WatchedPortrait',WATCHED_LANDSCAPE:'WatchedLandscape',RISED_PORTRAIT:'RisePortrait',RISED_LANDSCAPE:'RiseLandscape',LIFTED:'Lifted',UNDEFINED:'Undefined'}},function(a){'use strict';a.exports={BIKING:'Biking',FIDGETING:'Fidgeting',IDLE:'Idle',IN_VEHICLE:'InVehicle',RUNNING:'Running',STATIONARY:'Stationary',UNKNOWN:'Unknown',WALKING:'Walking',LAYING:'Laying'}}])});
//# sourceMappingURL=bai-activity-sensor.js.map