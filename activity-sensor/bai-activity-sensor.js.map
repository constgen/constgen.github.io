{"version":3,"file":"bai-activity-sensor.js","sources":["webpack:///bai-activity-sensor.js"],"sourcesContent":["(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.ActivitySensor=b():a.ActivitySensor=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='./',b(b.s=2)}([function(a,b,c){'use strict';function d(){}function e(){f.call(this)}var f=c(6),g=f.prototype,h=Object.create(g);e.prototype=h,h.constructor=e,h.init=d,h.uninit=d,h.subscribe=function(a){a=a||d,g.subscribe.call(this,a),1===this.callbacks.length&&this.init()},h.unsubscribe=function(a){g.unsubscribe.call(this,a),this.callbacks.length||this.uninit()},a.exports=e},function(a){'use strict';a.exports={sum:function(a,b){return a+b},square:function(a){return Math.pow(a,2)}}},function(a,b,c){a.exports=c(3)},function(a,b,c){'use strict';function d(){}function e(){this.orientationSensor=new g,this.movementSensor=new f,this.orientation=this.orientationSensor.orientation,this.movement=this.movementSensor.movement}var f=c(4),g=c(9),h=c(11),i=f.MOVEMENT_TYPE,j=g.ORIENTATION_TYPE;e.ACTIVITY_TYPE=h,e.prototype={constructor:e,get activityType(){var a=this.movement,b=this.orientation,c=a===i.FROZEN,d=a===i.STILL,e=a===i.MOVING,f=a===i.WALKING,g=a===i.RUNNING,k=a===i.DRIVING,l=b===j.LAYING_SCREEN_DOWN,m=b===j.LAYING_SCREEN_UP,n=b===j.STANDING_PORTRAIT,o=b===j.STANDING_LANDSCAPE,p=n||o,q=b===j.WATCHED_HIGH_PORTRAIT,r=b===j.WATCHED_HIGH_LANDSCAPE,s=q||r,t=b===j.WATCHED_LOW_PORTRAIT,u=b===j.WATCHED_LOW_LANDSCAPE,v=b===j.RISED_PORTRAIT,w=b===j.RISED_LANDSCAPE,x=b===j.LIFTED;switch(!0){case(l||m)&&c:case p&&c:return h.IDLE;case p&&k:return h.IN_VEHICLE;case s&&(e||d||c):return h.SITTING;case(t||u)&&(d||e||f):case s&&f:return h.STANDING;case(v||w)&&(e||d||c):case x:return h.LAYING;case f:return h.WALKING;case g:return h.RUNNING;case k:return h.IN_VEHICLE;default:return h.UNKNOWN;}},subscribe:function(a){function b(b){'movement'in b&&(c.movement=b.movement),'orientation'in b&&(c.orientation=b.orientation),a({type:c.activityType})}var c=this;a=a||d,this.orientationSensor.subscribe(b),this.movementSensor.subscribe(b)},unsubscribe:function(a){a||(this.orientationSensor.unsubscribe(),this.movementSensor.unsubscribe())}},a.exports=e},function(a,b,c){'use strict';function d(){var a=this;f.call(this),this.movement=e.UNDEFINED,this.smoothHorizontal=i.lowPass(60),this.smoothVertical=i.lowPass(60),this.sensorHandler=function(b){var c=b.acceleration.x||0,d=b.acceleration.y||0,f=b.acceleration.z||0,g=b.accelerationIncludingGravity.x||0,h=b.accelerationIncludingGravity.y||0,i=b.accelerationIncludingGravity.z||0,o=[c,d,f],p=k([g,h,i],o),q=l(m(o,p)/n(j(p)),p),r=k(o,q),s=j(r),t=j(q),u=a.smoothVertical(t),v=a.smoothHorizontal(s);a.movement=0.05>u&&0.05>v?e.FROZEN:0.1>u&&0.5>v?e.STILL:0.5>u&&1>v||1>u&&0.5>v?e.MOVING:3>u&&2>v?e.WALKING:3<=u&&10>u&&5>v?e.RUNNING:e.UNDEFINED,a.movement=[v,u,a.movement]}}var e=c(5),f=c(0),g=c(7),h=c(1),i=c(8),j=g.magnitude,k=g.substract,l=g.multiply,m=g.dotProduct,n=h.square;d.MOVEMENT_TYPE=e,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.init=function(){window.addEventListener('devicemotion',this.sensorHandler,!1)},d.prototype.uninit=function(){window.removeEventListener('devicemotion',this.sensorHandler,!1)},Object.defineProperties(d.prototype,{movement:{configurable:!1,enumerable:!0,get:function(){return this._movement},set:function(a){this._movement!==a&&(this._movement=a,this.emit({movement:a}))}}}),a.exports=d},function(a){'use strict';a.exports={FROZEN:'Frozen',STILL:'Still',MOVING:'Moving',WALKING:'Walking',RUNNING:'Running',RIDING:'Riding',DRIVING:'Driving',UNDEFINED:'Undefined'}},function(a){'use strict';function b(){this.callbacks=[]}b.prototype={constructor:b,subscribe:function(a){a&&this.callbacks.push(a)},unsubscribe:function(a){var b,c=this.callbacks;a?(b=c.indexOf(a),0<=b&&c.slice(b,1)):c.length=0},emit:function(a){for(var b=-1,c=this.callbacks;++b in c;)c[b](a)}},a.exports=b},function(a,b,c){'use strict';var d=c(1);a.exports={magnitude:function(a){var b=a.map(d.square).reduce(d.sum);return Math.sqrt(b)},substract:function(a,b){return a.map(function(a,c){return a-b[c]})},multiply:function(a,b){return a=a||0,b.map(function(b){return a*b})},dotProduct:function(a,b){return a.map(function(a,c){return a*b[c]}).reduce(d.sum)}}},function(a){'use strict';a.exports={lowPass:function(a,b){var c=0;return a=a||100,b=b||1,function(d){return c+=b*(d-c)/a,c}}}},function(a,b,c){'use strict';function d(){var a=this;f.call(this),this.orientation=e.UNDEFINED,this.sensorHandler=function(b){var c=b.beta,d=b.gamma;a.orientation=(170<c||-170>c||-10<c&&10>c)&&(-80>d||80<d)?e.STANDING_LANDSCAPE:80<c&&100>c&&-10<d&&10>d?e.STANDING_PORTRAIT:(175<c||-175>c)&&-5<d&&5>d?e.LAYING_SCREEN_DOWN:-5<c&&5>c&&-5<d&&5>d?e.LAYING_SCREEN_UP:(150<c||-150>c)&&-35<d&&35>d?e.LIFTED:100<=c&&-35<d&&35>d?e.RISED_PORTRAIT:(145<c||-145>c)&&(35<=d||-35>=d)?e.RISED_LANDSCAPE:30<c&&80>=c&&-30<d&&30>d?e.WATCHED_HIGH_PORTRAIT:-30<c&&30>c&&(30<=d||-30>=d)?e.WATCHED_HIGH_LANDSCAPE:5<=c&&-30<d&&30>d?e.WATCHED_LOW_PORTRAIT:-30<c&&30>c&&-30<d&&30>d?e.WATCHED_LOW_LANDSCAPE:e.UNDEFINED}}var e=c(10),f=c(0);d.ORIENTATION_TYPE=e,d.prototype=Object.create(f.prototype),d.prototype.construtcor=d,d.prototype.init=function(){window.addEventListener('deviceorientation',this.sensorHandler,!1)},d.prototype.uninit=function(){window.removeEventListener('deviceorientation',this.sensorHandler,!1)},Object.defineProperties(d.prototype,{orientation:{configurable:!1,enumerable:!0,get:function(){return this._orientation},set:function(a){this._orientation!==a&&(this._orientation=a,this.emit({orientation:a}))}}}),a.exports=d},function(a){'use strict';a.exports={LAYING_SCREEN_DOWN:'LayingScreenDown',LAYING_SCREEN_UP:'LayingScreenUp',STANDING_PORTRAIT:'StandingPortrait',STANDING_LANDSCAPE:'StandingLandscape',WATCHED_HIGH_PORTRAIT:'WatchedHighPortrait',WATCHED_HIGH_LANDSCAPE:'WatchedHighLandscape',WATCHED_LOW_PORTRAIT:'WatchedLowPortrait',WATCHED_LOW_LANDSCAPE:'WatchedLowLandscape',RISED_PORTRAIT:'RisePortrait',RISED_LANDSCAPE:'RiseLandscape',LIFTED:'Lifted',UNDEFINED:'Undefined'}},function(a){'use strict';a.exports={SITTING:'Sitting',STANDING:'Standing',LAYING:'Laying',IDLE:'Idle',IN_VEHICLE:'InVehicle',RUNNING:'Running',UNKNOWN:'Unknown',WALKING:'Walking'}}])});\n\n\n// WEBPACK FOOTER //\n// bai-activity-sensor.js"],"mappings":"AAAA","sourceRoot":""}